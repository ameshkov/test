# Требования к UI/UX Adguard для Android

* [Onboarding](#onboarding)
    * [Основная функция приложения](#Основная-функция-приложения)
    * [Что дает приобретение лицензии](#Что-дает-приобретение-лицензии)
    * [Приложение необходимо явно включить](#Приложение-необходимо-явно-включить)
    * [Трафик фильтруется прямо на устройстве](#Трафик-фильтруется-прямо-на-устройстве)
    * [Статистика Android: батарея и трафик](#Статистика-android-батарея-и-трафик)
    * [Брандмауэр](#Брандмауэр)
* [Main View](#main-activity)
    * [Статистика и кнопка включения](#Статистика-и-кнопка-включения)
    * [Карточки модулей](#Карточки-модулей)
    * [Alert](#alert)
    * [Ad Blocking](#ad-blocking)
    * [Filters Status](#filters-status)
    * [Bandwidth Usage](#bandwidth-usage)
    * [Battery Saving Mode](#battery-saving-mode)
    * [License Status](#license-status)
* [Navigation Drawer](#navigation-drawer)
* [Settings](#settings)
    * [Ad Blocker](#ad-blocker)
    * [User Filter](#user-filter)
    * [Whitelist](#whitelist)
    * [HTTPS Filtering](#https-filtering)
* [Firewall, Apps and Statistics](#firewall-apps-and-statistics)
    * [Firewall: global defaults](#firewall-global-defaults)
    * [Apps & Statistics](#apps-statistics)
    * [App Details] (#app-details)
* [What is premium (TBD)] (#what-is-premium)
* [Manage License (TBD)] (#manage-license)
* [Send Feedback (TBD)] (#send-feedback)
* [About Adguard (TBD)] (#about-adguard)

## Onboarding

Задача: прояснить пользователю, какие функции выполняет приложение. Функций очень много, поэтому onboarding как таковой можно разделить на несколько разных этапов. Возможно, для некоторых секций настроек нужен собственный onboarding?

### Основная функция приложения
Блокировка рекламы в браузерах и приложениях.

### Что дает приобретение лицензии
Блокировка рекламы в приложениях и блокировка phishing/malware. Блокировка рекламы в браузерах - бесплатная функция, ей можно пользоваться без ограничений.

> **Note:** среднему пользователю важнее блокировка рекламы в приложениях, остальное - скорее полезная доп функция, не более.
> **Note:** пробный период у нас запускается по желанию пользователя, а не автоматически. Нужно сподвигнуть пользователя начать пробный период.

### Приложение необходимо явно включить
Некоторые пользователи почему-то не понимают этого. При включении Android один раз спросит, действительно ли вы разрешаете приложению создать VPN соединение.

### Трафик фильтруется прямо на устройстве
Один момент (важный для многих пользователей): реального VPN соединения не создается, трафик фильтруется прямо на устройстве.

### Статистика Android: батарея и трафик
Еще один момент, который может ввести в заблуждение пользователя. Когда Adguard фильтрует трафик, в статистике андроид он весь записывается на наш счет. [Подробное описание проблемы] (https://kb.adguard.com/index.php?/Knowledgebase/Article/View/51/4/voprosy-potreblenija-adguard-dlja-android-trfik-i-resurs-btrei).

### Брандмауэр
Позволяет управлять доступом в сеть на уровне приложений и подсчитывать статистику потребления трафика. Есть еще одна очень полезная функция брандмауэра: возможность ограничить доступ в сеть при выключенном экране устройства, что хорошо сказывается на потреблении батареи. Возможно, имеет смысл ввести какую-то специальную функцию типа "режима экономии батареи", при включении которой будут использоваться подготовленные нами настройки брандмауэра.

## Main Activity

Примерный макет:
https://monosnap.com/file/EURQJ4F7G9Rq3t3gGARFW3qr90dNKO

### Статистика и кнопка включения

Пользователи очень любят следить за статистикой, так что это must have на главном экране.

### Карточки модулей

Таким образом мы сможем на первом же экране показать пользователю возможности приложения. Карточка должна работать как "шорткат" для быстрого перехода к тому или иному модулю.

#### Alert

Нужно два вида алертов: Information, Warning
Сценарии: показываем warning если пробный период или лицензия скоро истекает, показывает info когда вышла новая версия программы.

#### Ad Blocking

ТОП приложений по количеству заблокированной рекламы и счетчиков.
Тап по карточке перекидывает в "настройки приложений".

**Q:** что показывать, когда необходимой статистики еще нет?

#### Filters Status

Блокировка рекламы построена на использовании рекламных фильтров.

Существует несколько основных типов фильтров:
1. Против рекламы (при этом обычно для разных языков свои фильтры)
2. Против счетчиков (типа Google Analytics)
3. Против виджетов соцсетей (лайки, виджеты групп и т.д.)
4. Против раздражителей того или иного типа (EU cookie notices, anti-adblock warnings)

> **Note:** многие следят за временем обновления фильтров, им это прямо очень важно

Тап по карточке перекидывает в настройки рекламных фильтров.
Имеет смысл дать на этой карточке возможность быстро проверить обновления фильтров.

#### Bandwidth Usage

Карточка со статистикой потребления трафика.

Что мы можем тут вывести:

1. Общее потребление Cellular/Wifi/Roaming data.
2. ТОП приложений по потреблению трафика.

> **Note:** пользователю всегда важнее потребление Cellular data.
> **Q:** за какой период вывести? Как пользователь поймет, что это за период?

Тап по карточке перекидывает в настройки приложений.

#### Battery Saving Mode

Хочется режим экономии батареи вывести в отдельную карточку (возможно, поднять ее выше).
Из функционального, на карточку нужно вывести только переключатель (вкл-выкл).
Возможно, нужно какое-то короткое объяснение того, в чем заключается экономия.

#### License Status

Разновидности статусов:
1. Бесплатно
2. Идет пробный период
3. Пробный период скоро истекает
4. Пробный период истек
4. Активировано лицензионным ключом
5. Ключ скоро истекает
6. Лицензионный ключ истек

## Navigation Drawer

Вариант на макете:
https://monosnap.com/file/LvoCcG5wKpEpwcxCBImyABRxBYKIBQ

В принципе, он не плох. Можно развернуть меню "Settings" и показать все пункты оттуда, так мы избавимся от необходимости забивать пустое пространство.

**Note:** В перспективе в приложении появится возможность синхронизации настроек через личный кабинет. Для этого нам пригодится зона "профиля" в этом меню. Но пока этого функционала нет, можно не париться.

## Settings

Общее требование одно: используем стандартные контролы и гайдлайны гугла:
https://material.google.com/patterns/settings.html

Для большинства разделов настроек достаточно простого лэйаута с группировкой настроек.
Сложные разделы будут рассмотрены ниже.

### Ad Blocker

На данный момент настройки блокировки рекламы выглядят очень просто: мы показываем список фильтров и даем возможность отключить-включить нужные. Выглядит не очень, фильтров очень много, легко запутаться.

Что нужно:
* Показать время последней проверки обновлений фильтров (дать возможность эти обновления проверить вручную?)
* Предупредить пользователя, что включать ВСЕ фильтры не нужно и вообще не рекомендуется.
* Сгруппировать фильтры по категориям
* Отдельная категория: фильтры, импортированные вручную. В контекстном меню можно добавить опцию для импорта, достаточно просто указания URL фильтра, чтобы его импортировать.

### User Filter

Собственный фильтр пользователя. Сюда он может вручную добавлять те или иные правила для фильтрации.
Синтаксис правил сложный, так что эта опция точно не для Casual пользователя:
https://adguard.com/en/filterrules.html

В принципе можно вообще этот блок унести внутрь раздела "Ad Blocker".

Что нужно внутри:
Ссылка на синтаксис создания правил
Добавление/удаление/редактирование правила
Импорт/экспорт пользовательского фильтра

### Whitelist

Список доменов/сайтов, для которых пользователь хочет отключить блокировку рекламы.

### HTTPS Filtering

Этот блок настроек полностью посвящен такой вещи как фильтрация HTTPS. Такая фильтрация позволяет заметно повысить качества блокирования рекламы на HTTPS сайтах, которых сейчас стало очень много.

В принципе, можно оставить текущий layout (то есть предлагать вначале пользователю ознакомиться с описанием), так как штука опциональная.

## Firewall, Apps and Statistics

Этот пункт объединяет сразу два раздела настроек: **Firewall** и **Apps & Statistics**.

**Firewall** сейчас содержит глобальные разрешения, которые используются по-умолчанию.
**Apps & Statistics** по функционалу шире. Помимо статистики и разрешений для конкретного приложения, он также позволяет менять для приложения другие настройки (блокировка рекламы, https фильтрация и т.п.). В принципе, эти настройки можно было бы раскидать по разным модулям. Но есть ощущение, что это еще сильнее запутало бы пользователя.

Имеет смысл предварительно посмотреть на раздел Data usage в собственных настройках Android.

### Firewall: global defaults

Глобальные разрешения используются для всех приложений по-умолчанию. На экране настройки конкретного приложения эти разрешения можно переопределить.

Wi-fi - разрешает доступ в интернет по wi-fi
Cellular data - разрешает доступ в интернет по 3G/4G
Wi-fi when screen is off - доступ в интернет по wi-fi когда экран отключен
Cellular data when screen is off - доступ в интернет по wi-fi когда экран отключен
Roaming - доступ в интернет в роуминге
Firewall notificaitons - показывать ли уведомления о блокировке доступа в интернет.

Отключение функции "Enable firewall" эквивалентно состоянию "Все разрешено, никуда не вмешиваться".

### Apps & Statistics

Что мы должны показать в этом разделе:

1. График со статистикой по трафика (или график не нужен? хз)
2. Статистика должна быть разделена на Cellular и Wi-fi. Обычно пользователям wi-fi не очень важен, так что по умолчанию должен быть выбран Cellular. Можно сделать по аналогии с тем, как это сделано в самом андроиде: https://monosnap.com/file/1mHLCE8w4d7AcsW0dVEbOykOU9dvLw
3. Список приложений с краткой статистикой по трафику (download/upload/saved). Bandwidth saved: примерная оценка трафика, сэкономленного благодаря работе Adguard.
4. На этом экране нужно показать текущее состояние глобальных настроек и разрешений.
5. Для каждого приложения нужно придумать индикацию его персональных настроек, чтобы пользователь по списку приложений мог сориентироваться кому куда что разрешено. В текущей версии индикация неполная.
6. Должна быть опция поиска по названию
7. Должна быть возможность отфильтровать элементы списка по тому или иному признаку, например: показать приложения, для которых отключена блокировка рекламы.

### App Details

Экран с детализацией по конкретному приложению.

1. График со статистикой (не уверен, что он нужен тут)
2. Общая статистика за выбранный период: заблокировано рекламы, счетчиков, угроз, сэкономлено трафика

**Основные настройки**

`Enabled` - важная вещь. Отключение этой галки полностью отключает всякую фильтрацию этого приложения.
`Ad blocking` - блокировка рекламы для того или иного приложения. Некоторые приложения некорректно себя ведут при блокировке рекламы, поэтому приходится для них ее отключать. Также, когда пользователь лицензию еще не купил, мы ему не даем включить блокировку рекламу для обычных приложений (не браузеров).
`HTTPS Filtering` - фильтрация HTTPS для этого конкретного приложения. У нас обширный список исключений, для которых фильтрация HTTPS по умолчанию отключена. Например, банковские приложения, для них фильтровать HTTPS было бы странно.

**Firewall**
Тут идет список настроек брандмауэра, которые уже были описаны выше.

**Technical information**
Эта информация выведена скорее в отладочных целях.
